<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>PerkHub Admin Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="author" content="JH It Infotech" />
  <meta name="description" content="PerkHub Admin Panel - Manage users, apps, games and reports efficiently." />

  <!-- Fonts -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fontsource/source-sans-3@5.0.12/index.css"/>

  <!-- Plugins -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.10.1/styles/overlayscrollbars.min.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"/>
  <link rel="stylesheet" href="dist/css/adminlte.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsvectormap@1.5.3/dist/css/jsvectormap.min.css"/>
</head>

<body class="layout-fixed sidebar-expand-lg bg-body-tertiary">
<div class="app-wrapper">

  <!-- Navbar + Sidebar from Go Templates -->
  {{ template "navbar" . }}
  {{ template "sidenavbar" . }}

  <!-- Main -->
  <main class="app-main">
    <div class="app-content-header">
      <div class="container-fluid">
        <div class="row">
          <div class="col-sm-6"><h3 class="mb-0">Dashboard</h3></div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-end">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active">Dashboard</li>
            </ol>
          </div>
        </div>
      </div>
    </div>

    <!-- Dashboard Content -->
    <div class="app-content">
      <div class="container-fluid">

        <!-- Stats Boxes -->
        <div class="row">
          <div class="col-lg-3 col-6">
            <div class="small-box text-bg-primary">
              <div class="inner">
                <h3 id="total-users">0</h3>
                <p>Total Users</p>
              </div>
              <i class="bi bi-people small-box-icon"></i>
              <a href="#" class="small-box-footer">More info <i class="bi bi-arrow-right"></i></a>
            </div>
          </div>
          <div class="col-lg-3 col-6">
            <div class="small-box text-bg-success">
              <div class="inner">
                <h3 id="minapp-count">0</h3>
                <p>MiniApps</p>
              </div>
              <i class="bi bi-grid small-box-icon"></i>
              <a href="#" class="small-box-footer">More info <i class="bi bi-arrow-right"></i></a>
            </div>
          </div>
          <div class="col-lg-3 col-6">
            <div class="small-box text-bg-warning">
              <div class="inner">
                <h3 id="game-count">0</h3>
                <p>Games</p>
              </div>
              <i class="bi bi-controller small-box-icon"></i>
              <a href="./gameslist.html" class="small-box-footer">View Games <i class="bi bi-arrow-right"></i></a>
            </div>
          </div>
          <div class="col-lg-3 col-6">
            <div class="small-box text-bg-danger">
              <div class="inner">
                <h3 id="unique-visitors">0</h3>
                <p>Unique Visitors</p>
              </div>
              <i class="bi bi-graph-up small-box-icon"></i>
              <a href="#" class="small-box-footer">Analytics <i class="bi bi-arrow-right"></i></a>
            </div>
          </div>
        </div>

       
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="app-footer">
    <div class="float-end d-none d-sm-inline">Powered by JH It Infotech</div>
    <strong>Â© 2025 PerkHub Admin Panel.</strong> All rights reserved.
  </footer>

</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.10.1/browser/overlayscrollbars.browser.es6.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="dist/js/dashboard/dashboard.js"></script>
<script src="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jsvectormap@1.5.3/dist/js/jsvectormap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jsvectormap@1.5.3/dist/maps/world.js"></script>

<script src="dist/js/Login/login.js"></script>
<script>
  // Validate Token
  if (typeof validateToken === "function") {
    if (!validateToken()) {
      alert("Session expired. Redirecting to login...");
      window.location.href = "./login.html";
    }
  }

  // Safe logout handler
  const logoutBtn = document.getElementById("logout-btn");
  if (logoutBtn) {
    logoutBtn.addEventListener("click", () => {
      localStorage.removeItem("token");
      window.location.href = "./login.html";
    });
  }

  // Example Chart
  const revenueChart = new ApexCharts(document.querySelector("#revenue-chart"), {
    series: [{ name: "Revenue", data: [10, 20, 15, 30, 40, 35, 50] }],
    chart: { type: "area", height: 300 },
    colors: ["#0d6efd"],
    xaxis: { categories: ["Jan","Feb","Mar","Apr","May","Jun","Jul"] },
  });
  revenueChart.render();

  // World Map
  new jsVectorMap({
    selector: "#world-map",
    map: "world",
    zoomButtons: true,
    markers: [
      { name: "India", coords: [20.5937, 78.9629] },
      { name: "USA", coords: [37.0902, -95.7129] }
    ]
  });
</script>
</body>
</html>
