<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PerkHub</title>
    <link rel="stylesheet" href="../Admin/css/styles.css"> 
    <link rel="stylesheet" href="../Admin/css/navbar-styles.css"> 
    <link rel="icon" href="Admin/assets/images/favicon.ico" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700" rel="stylesheet">
    <link rel="stylesheet" href="Admin/assets/pages/waves/css/waves.min.css" type="text/css" media="all">
    <link rel="stylesheet" type="text/css" href="Admin/assets/css/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="Admin/assets/pages/waves/css/waves.min.css" type="text/css" media="all">
    <link rel="stylesheet" type="text/css" href="Admin/assets/icon/themify-icons/themify-icons.css">
    <link rel="stylesheet" type="text/css" href="Admin/assets/css/font-awesome-n.min.css">
    <link rel="stylesheet" type="text/css" href="Admin/assets/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="Admin/assets/css/jquery.mCustomScrollbar.css">
    <link rel="stylesheet" type="text/css" href="Admin/css/userlist.css"> <!-- Link to the external CSS file -->
    
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <h1>PerkHub Admin Panel</h1>
            </div>
            <div id="navbar-placeholder"></div>
        </aside>

        <div class="container">
            <h1>Add My Mini App</h1>
            
            <form action="submit_miniapp.php" method="POST" enctype="multipart/form-data">
                
                <!-- Mini App Information -->
                <div class="form-group">
                    <label for="name">Mini App Name</label>
                    <input type="text" id="name" name="name" required placeholder="Enter the name of your mini app">
                </div>
                
                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea id="description" name="description" rows="4" required placeholder="Enter the description of your mini app"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="cashback_terms">Cashback Terms</label>
                    <textarea id="cashback_terms" name="cashback_terms" rows="4" required placeholder="Enter cashback terms"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="cashback_rates">Cashback Rates (%)</label>
                    <input type="number" id="cashback_rates" name="cashback_rates" min="0" max="100" required placeholder="Enter cashback percentage (0-100)">
                </div>
                
                <div class="form-group">
                    <label for="url">URL</label>
                    <input type="url" id="url" name="url" required placeholder="Enter the URL of your mini app">
                </div>
                
                <!-- Checkbox Fields -->
                <div class="form-group">
                    <label for="cb_active" class="checkbox-label">
                        <input type="checkbox" id="cb_active" name="cb_active" value="1"> Cashback Active
                    </label>
                </div>
                
                <div class="form-group">
                    <label for="popular" class="checkbox-label">
                        <input type="checkbox" id="popular" name="popular" value="1"> Popular
                    </label>
                </div>
                
                <div class="form-group">
                    <label for="trending" class="checkbox-label">
                        <input type="checkbox" id="trending" name="trending" value="1"> Trending
                    </label>
                </div>
                
                <div class="form-group">
                    <label for="top_cashback" class="checkbox-label">
                        <input type="checkbox" id="top_cashback" name="top_cashback" value="1"> Top Cashback
                    </label>
                </div>
                
                <div class="form-group">
                    <label for="about">About the Mini App</label>
                    <textarea id="about" name="about" rows="4" required placeholder="Enter about the mini app"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="howitswork">How It Works</label>
                    <textarea id="howitswork" name="howitswork" rows="4" required placeholder="Enter how the mini app works"></textarea>
                </div>
                
                <!-- Image Upload -->
                <div class="form-group">
                    <label for="logo">Upload Logo</label>
                    <input type="file" id="logo" name="logo" accept="image/*">
                </div>
                
                <div class="form-group">
                    <label for="icon">Upload Icon</label>
                    <input type="file" id="icon" name="icon" accept="image/*">
                </div>
                
                <div class="form-group">
                    <label for="banner">Upload Banner</label>
                    <input type="file" id="banner" name="banner" accept="image/*">
                </div>
                
                <!-- Publisher Information -->
                <div class="form-group">
                    <label for="macro_publisher">Macro Publisher</label>
                    <input type="text" id="macro_publisher" name="macro_publisher" required placeholder="Enter macro publisher name">
                </div>
                
                <div class="form-group">
                    <label for="label">Label</label>
                    <input type="text" id="label" name="label" placeholder="Enter any label for your mini app">
                </div>
                
                <!-- Submit Button -->
                <button type="submit" class="btn-submit">Submit Mini App</button>
            </form>
        </div>
    
    </div>

    <script src="../Admin/js/load-nav.js"></script>
    <script src="../Admin/js/auth.js"></script>
    <script src="../Admin/js/dashboard.js"></script>
    <script>
        if (!validateToken()) {
            alert('You are not logged in or your session has expired. Redirecting to login page...');
            window.location.href = '/login.html';
        }

        // Logout button
        document.getElementById('logout-btn').addEventListener('click', () => {
            localStorage.removeItem('token'); // Clear the token
            window.location.href = '/login.html'; // Redirect to login page
        });

        // Add Brand button click event
        document.getElementById('addBrandBtn').addEventListener('click', () => {
            // Code to handle the "Add Brand" functionality
            alert('Add Brand button clicked!');
        });
    </script>

    <script src="../Admin/js/miniapplist.js"></script>
</body>
</html>
